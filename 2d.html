<!DOCTYPE html>
<meta charset="utf-8">
<title>Two Dimensional Perlin Fun</title>
<script src="mt.js"></script>
<script src="perlin.js"></script>
<script>
onload = function() {
  var WIDTH = 200;
  var HEIGHT = WIDTH;
  var SEED = 12194;
  var PERSISTENCE = 0.5;
  var OCTAVES = 4;
  var WAVELENGTH = WIDTH / 5;
  var ZSCALE = 255;

  var canvas = document.createElement('canvas');
  canvas.width = WIDTH;
  canvas.height = HEIGHT;

  var ctx = canvas.getContext('2d');

  ctx.fillStyle = "#f0f0f0";
  ctx.strokeStyle = "black";
  ctx.fillRect(0, 0, WIDTH, HEIGHT);

  var perlin = Perlin.LayeredNoise({
    seed: SEED,
    width: WIDTH,
    wavelength: WAVELENGTH,
    persistence: PERSISTENCE,
    octaves: OCTAVES,
    noise: Perlin.Noise2D
  });

  for (var y = 1; y < HEIGHT; y++) {
    for (var x = 1; x < WIDTH; x++) {
      var z = Math.floor(perlin.at(x, y) * ZSCALE);
      ctx.fillStyle = "rgb(" + [z, z, z].join(', ') + ")";
      ctx.fillRect(x-1, HEIGHT-y-1, 1, 1);
    }
  }

  document.body.appendChild(canvas);
};
</script>
